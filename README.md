# FUFTools

A collection of Python utility tools by [Franz und Franz](https://franz.agency) designed for production environments.

## Overview

FUFTools is an open-source suite of Python utilities designed with modularity, scalability, and production readiness in mind. Each tool follows best practices and is thoroughly documented.

## Available Tools

### makeonefile.py

A utility that combines the content of multiple text files from a specified directory and its subdirectories into a single output file. Each file's content is preceded by a separator showing metadata such as the file path, modification date, size, type, and a SHA256 checksum for integrity.

#### Features

- Recursive file scanning in a source directory.
- Customizable separators between file contents: 'Standard', 'Detailed', 'Markdown', and 'MachineReadable'.
    - The 'MachineReadable' style uses unique boundary markers and JSON metadata (including path, modification date, type, size in bytes, and SHA256 checksum) for robust parsing and splitting.
- SHA256 checksum included in headers for all styles to help ensure data integrity.
- Option to add a timestamp to the output filename.
- Exclusion of common project directories (e.g., node_modules, .git, build).
- Exclusion of binary files by default.
- Option to include dot-files and binary files.
- Case-insensitive exclusion of additional specified directory names.
- Control over line endings (LF or CRLF) for script-generated separators.
- Verbose mode for detailed logging.
- Prompts for overwriting existing output file unless `--force` is used.

#### Usage

Basic command:
```bash
python makeonefile.py --source-directory /path/to/your/code --output-file /path/to/combined_output.txt
```

Using MachineReadable style for robust splitting and integrity checks:
```bash
python makeonefile.py -s ./my_project -o ./output/bundle.m1f --separator-style MachineReadable --force
```

For all options, run:
```bash
python makeonefile.py --help
```

### splitfiles.py

A utility that splits a single input file (previously created by `makeonefile.py`) back into multiple files, recreating the original directory structure within a specified destination directory. It also verifies file integrity using SHA256 checksums if they are present in the file headers.

#### Features

- Parses combined files generated by `makeonefile.py`.
- Supports all separator styles: 'Standard', 'Detailed', 'Markdown', and 'MachineReadable'.
- Recreates the original directory structure based on paths found in separators.
- Verifies file integrity by comparing calculated SHA256 checksums of extracted content against checksums stored in the headers (if available, primarily with 'MachineReadable' style).
- Option to set file timestamps to original (default, if available from 'MachineReadable' metadata) or current system time using `--timestamp-mode`.
- Option to force overwrite of existing files in the destination directory.
- Verbose mode for detailed operational logging.
- Secure path handling to prevent writing outside the destination directory.

#### Usage

Basic command:
```bash
python splitfiles.py --input-file /path/to/combined_output.txt --destination-directory /path/to/output_folder
```

Splitting a MachineReadable file with force overwrite and verbose output:
```bash
python splitfiles.py -i ./output/bundle.m1f -d ./extracted_project -f -v
```

Using original timestamps (default behavior if available, or explicitly):
```bash
python splitfiles.py -i bundle.m1f -d extracted --timestamp-mode original
```

Using current system timestamps for all extracted files:
```bash
python splitfiles.py -i bundle.m1f -d extracted --timestamp-mode current
```

For all options, run:
```bash
python splitfiles.py --help
```

## Requirements

- Python 3.7+
- Standard Python libraries only (includes `argparse`, `datetime`, `hashlib`, `json`, `logging`, `os`, `pathlib`, `re`, `sys` across the tools).

## Coming Soon

Additional Python tools are under development and will be added to this repository in the future.

## License

This project is licensed under the MIT License. See the [LICENSE.md](LICENSE.md) file for details.

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request. 